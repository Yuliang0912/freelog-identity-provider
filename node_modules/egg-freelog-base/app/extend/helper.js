/**
 * Created by yuliang on 2017/8/9.
 */

'use strict'

const arrayExpand = require('./helper/array_expands')
const stringExpand = require('./helper/string_expands')
const cryptoHelper = require('./helper/crypto_helper')
const policySegmentIdGenerator = require('./helper/policy_segment_id_generator')

module.exports = {

    /**
     * 自定义字符串拓展
     */
    stringExpand,

    /**
     * 自定义数组拓展
     */
    arrayExpand,

    /**
     * 加密相关帮助类
     */
    cryptoHelper,

    /**
     * 获取内部API返回结果
     */
    convertApiResult (data) {
        if (!data) {
            return Promise.reject(new Error('api data is null'))
        }
        if (!Reflect.has(data, 'ret') || !Reflect.has(data, 'errcode')) {
            return Promise.reject(new Error('error api data format'))
        }
        if (data.ret !== 0 || data.errcode !== 0) {
            return Promise.reject(Object.assign(new Error(data.msg || 'null error msg'), {
                ret: data.ret,
                errCode: data.errcode
            }))
        }
        return Promise.resolve(data.data)
    },

    /**
     * policy|presentable段落ID生成器
     */
    policySegmentIdGenerator
}