/**
 * Created by yuliang on 2017/8/24.
 */

/**
 * koa-validate参数校验拓展函数
 * @type Object
 */

module.exports = {

    /**
     * 是否是freelog定义的资源ID格式
     */
    isResourceId(tip){
        if (this.goOn && !/^[0-9a-zA-Z]{40}$/.test(this.value)) {
            this.addError(tip || this.key + ' is not resourceId format.');
        }
        return this
    },

    /**
     * 是否是mongoDB-ObjectId
     * @param tip
     */
    isMongoObjectId(tip){
        if (this.goOn && !/^[0-9a-f]{24}$/.test(this.value)) {
            this.addError(tip || this.key + ' is error format.');
        }
        return this
    },

    /**
     * md5格式校验
     * @param tip
     * @returns {exports}
     */
    isMd5(tip){
        if (this.goOn && !/^[0-9a-f]{32}$/.test(this.value)) {
            this.addError(tip || this.key + ' is not md5.');
        }
        return this
    }
}